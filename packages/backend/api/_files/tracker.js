(()=>{const e=()=>+new Date,t=(e=[])=>e.reduce(((e,t)=>e+t),0);(async r=>{const{navigator:{language:n},location:{pathname:a,host:s},document:i,history:o}=r;let c=a;const l=Object.freeze({PAGE_VIEW:"pageView"}),u=i.querySelector("script[aurora-id]");if(!u)return!1;if(""===s)return!1;const x=u.getAttribute("src").replace("/t/aurora.js","/api/collect"),g=u.getAttribute("aurora-id"),p=async t=>{const r=(()=>{const t=JSON.parse(localStorage.getItem("_useAurora")),r=(()=>{const e=new Date;return e.setMinutes(e.getMinutes()-15)})();if(!t||t.expires<=+new Date){const t=e();return{uid:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),isNewVisitor:!0,isNewSession:!0,lastPageViewID:null,lastVisitAt:t}}return t.lastVisitAt<=+r&&(t.isNewSession=!0),t})();try{const e=await fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:l.PAGE_VIEW,element:t,language:n,wid:g,referrer:i.referrer,...r})}),a=await e.json();r.lastPageViewID=a.id}catch(e){console.log("Err")}r.isNewVisitor=!1,r.isNewSession=!1,r.lastVisitAt=e(),(e=>{const t={...e,expires:+(()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),24,0,0)})()};localStorage.setItem("_useAurora",JSON.stringify(t))})(r)};p(c);const w=((e=[])=>{let r=performance.now();return()=>{if("hidden"===i.visibilityState){e.push(performance.now()-r);const n=new Blob([JSON.stringify({wid:g,duration:t(e)})],{type:"application/json; charset=UTF-8"});navigator.sendBeacon(`${x}/null`,n)}else r=performance.now()}})();i.addEventListener("visibilitychange",w),o.pushState=(()=>{const e=o.pushState;return(...t)=>{const[,,r]=t;return r!==c&&(c=r,p(r)),e.apply(o,t)}})()})(window)})();